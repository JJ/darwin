<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Darwin Neuroevolution Framework: core::PropertySet Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Darwin Neuroevolution Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecore.html">core</a></li><li class="navelem"><a class="el" href="classcore_1_1_property_set.html">PropertySet</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classcore_1_1_property_set-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">core::PropertySet Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The foundation for data structures supporting runtime reflection.  
 <a href="classcore_1_1_property_set.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="properties_8h_source.html">properties.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for core::PropertySet:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcore_1_1_property_set.png" usemap="#core::PropertySet_map" alt=""/>
  <map id="core::PropertySet_map" name="core::PropertySet_map">
<area href="classcore_1_1_non_copyable.html" title="Classes derived from this are not copyable or movable. " alt="core::NonCopyable" shape="rect" coords="0,0,183,24"/>
<area href="structann_1_1_config.html" title="The ANN library configuration. " alt="ann::Config" shape="rect" coords="193,112,376,136"/>
<area href="structcart__pole_1_1_config.html" title="Cart-Pole domain configuration. " alt="cart_pole::Config" shape="rect" coords="193,168,376,192"/>
<area href="structconquest_1_1_config.html" title="Conquest domain configuration. " alt="conquest::Config" shape="rect" coords="193,224,376,248"/>
<area href="structdarwin_1_1_evolution_config.html" title="Settings for an evolution experiment run. " alt="darwin::EvolutionConfig" shape="rect" coords="193,280,376,304"/>
<area href="structdarwin_1_1_experiment_setup.html" title="An experiment configuration. " alt="darwin::ExperimentSetup" shape="rect" coords="193,336,376,360"/>
<area href="structdouble__cart__pole_1_1_config.html" title="Double-Cart-Pole domain configuration. " alt="double_cart_pole::Config" shape="rect" coords="193,392,376,416"/>
<area href="structfind__max__value_1_1_config.html" title="Find_Max_Value domain configuration. " alt="find_max_value::Config" shape="rect" coords="193,448,376,472"/>
<area href="structharvester_1_1_config.html" title="Harvester domain configuration. " alt="harvester::Config" shape="rect" coords="193,504,376,528"/>
<area href="structpong_1_1_config.html" title="Pong domain configuration. " alt="pong::Config" shape="rect" coords="193,560,376,584"/>
<area href="structtic__tac__toe_1_1_config.html" title="Tic-Tac-Toe domain configuration. " alt="tic_tac_toe::Config" shape="rect" coords="193,616,376,640"/>
<area href="structtournament_1_1_tournament_config.html" title="Tournament configuration. " alt="tournament::TournamentConfig" shape="rect" coords="193,672,376,696"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa2b26e814908929c68515f18e8e36746"><td class="memItemLeft" align="right" valign="top"><a id="aa2b26e814908929c68515f18e8e36746"></a>
vector&lt; <a class="el" href="classcore_1_1_property.html">Property</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1_property_set.html#aa2b26e814908929c68515f18e8e36746">properties</a> ()</td></tr>
<tr class="memdesc:aa2b26e814908929c68515f18e8e36746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accessor to the list of properties. <br /></td></tr>
<tr class="separator:aa2b26e814908929c68515f18e8e36746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38cd816371fc80faf6a39949906a2fda"><td class="memItemLeft" align="right" valign="top"><a id="a38cd816371fc80faf6a39949906a2fda"></a>
vector&lt; const <a class="el" href="classcore_1_1_property.html">Property</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1_property_set.html#a38cd816371fc80faf6a39949906a2fda">properties</a> () const</td></tr>
<tr class="memdesc:a38cd816371fc80faf6a39949906a2fda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Accessor to the list of properties. <br /></td></tr>
<tr class="separator:a38cd816371fc80faf6a39949906a2fda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba45789d3af1fd0d77c89856d2e633fb"><td class="memItemLeft" align="right" valign="top"><a id="aba45789d3af1fd0d77c89856d2e633fb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1_property_set.html#aba45789d3af1fd0d77c89856d2e633fb">resetToDefaultValues</a> ()</td></tr>
<tr class="memdesc:aba45789d3af1fd0d77c89856d2e633fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets all the properties to the default values. <br /></td></tr>
<tr class="separator:aba45789d3af1fd0d77c89856d2e633fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82c1fedba829084422073eee41ded7fc"><td class="memItemLeft" align="right" valign="top"><a id="a82c1fedba829084422073eee41ded7fc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1_property_set.html#a82c1fedba829084422073eee41ded7fc">copyFrom</a> (const <a class="el" href="classcore_1_1_property_set.html">PropertySet</a> &amp;src)</td></tr>
<tr class="memdesc:a82c1fedba829084422073eee41ded7fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer values between two property sets. <br /></td></tr>
<tr class="separator:a82c1fedba829084422073eee41ded7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b081d98adbbf678ba5002b02f48c526"><td class="memItemLeft" align="right" valign="top"><a id="a4b081d98adbbf678ba5002b02f48c526"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1_property_set.html#a4b081d98adbbf678ba5002b02f48c526">seal</a> ()</td></tr>
<tr class="memdesc:a4b081d98adbbf678ba5002b02f48c526"><td class="mdescLeft">&#160;</td><td class="mdescRight">After sealing a <a class="el" href="classcore_1_1_property_set.html" title="The foundation for data structures supporting runtime reflection. ">PropertySet</a>, all attempts to modify it through the <a class="el" href="classcore_1_1_property.html" title="Reflection interface to a property in a PropertySet. ">Property</a> interface will throw an exception (even if setting to the same value) <br /></td></tr>
<tr class="separator:a4b081d98adbbf678ba5002b02f48c526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d2cc202504c7ec8f7e48255eb2dd349"><td class="memItemLeft" align="right" valign="top">json&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1_property_set.html#a2d2cc202504c7ec8f7e48255eb2dd349">toJson</a> () const</td></tr>
<tr class="memdesc:a2d2cc202504c7ec8f7e48255eb2dd349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialize all the properties to a json object.  <a href="#a2d2cc202504c7ec8f7e48255eb2dd349">More...</a><br /></td></tr>
<tr class="separator:a2d2cc202504c7ec8f7e48255eb2dd349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7efad703bb60c3e420b6a1925b38377c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcore_1_1_property_set.html#a7efad703bb60c3e420b6a1925b38377c">fromJson</a> (const json &amp;json_obj)</td></tr>
<tr class="memdesc:a7efad703bb60c3e420b6a1925b38377c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deserialize a set of properties from a json object.  <a href="#a7efad703bb60c3e420b6a1925b38377c">More...</a><br /></td></tr>
<tr class="separator:a7efad703bb60c3e420b6a1925b38377c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The foundation for data structures supporting runtime reflection. </p>
<p><a class="el" href="classcore_1_1_property_set.html" title="The foundation for data structures supporting runtime reflection. ">PropertySet</a> provides portable-C++ support for structures containing self-describing properties (no build time pre-processing or external tools are required, this is a compiler-only solution)</p>
<ul>
<li>Each property has a <b>name</b>, <b>type</b>, <b>default value</b> and a brief <b>description string</b></li>
<li>Properties map directly to a C++ struct data member with the specified type</li>
<li>Each instance of PropertySet-derived structs includes its own reflection metadata</li>
</ul>
<h3>Usage</h3>
<p>In order to support the runtime reflection, a structure must derive from core::Properties. The individual properties are then declared using the PROPERTY() macro, for example:</p>
<div class="fragment"><div class="line"><span class="comment">// PROPERTY(name, type, default_value, description)</span></div><div class="line"></div><div class="line"><span class="keyword">struct </span>Config : <span class="keyword">public</span> <a class="code" href="classcore_1_1_property_set.html">core::PropertySet</a> {</div><div class="line">  PROPERTY(max_value, <span class="keywordtype">int</span>, 100, <span class="stringliteral">&quot;Maximum value&quot;</span>);</div><div class="line">  PROPERTY(resolution, <span class="keywordtype">float</span>, 0.3f, <span class="stringliteral">&quot;Display resolution&quot;</span>);</div><div class="line">  PROPERTY(name, <span class="keywordtype">string</span>, <span class="stringliteral">&quot;darwin&quot;</span>, <span class="stringliteral">&quot;Name&quot;</span>);</div><div class="line">  PROPERTY(layers, vector&lt;int&gt;, {}, <span class="stringliteral">&quot;Hidden layer sizes&quot;</span>);</div><div class="line">};</div></div><!-- fragment --><h3>Direct member access (as regular struct members)</h3>
<p>This zero-overhead compared with regular C++ structs was one of the key requirements, since the reflected structures are commonly configuration values which could be read on the hot paths (in contrast, the high <a class="el" href="classcore_1_1_property_set.html" title="The foundation for data structures supporting runtime reflection. ">PropertySet</a> instantiation cost and the reflection path overhead were deemed acceptable)</p>
<div class="fragment"><div class="line">Config config;</div><div class="line"></div><div class="line"><span class="comment">// set Config::max_value</span></div><div class="line">config.max_value = 75;</div><div class="line"></div><div class="line"><span class="comment">// read Config::name</span></div><div class="line"><span class="keyword">auto</span> name = config.name;</div></div><!-- fragment --><h3>Using the runtime reflection support</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> printProperties(<span class="keyword">const</span> <a class="code" href="classcore_1_1_property_set.html">core::PropertySet</a>* config) {</div><div class="line">  <span class="comment">// enumerate properties</span></div><div class="line">  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; property : config-&gt;<a class="code" href="classcore_1_1_property_set.html#aa2b26e814908929c68515f18e8e36746">properties</a>()) {</div><div class="line">    <span class="comment">// read the property name and value as strings</span></div><div class="line">    <a class="code" href="namespacecore.html#ab3d8380ec0c61b6e6de47ed06e2659e6">core::log</a>(<span class="stringliteral">&quot;%s = %s\n&quot;</span>, property-&gt;name(), <span class="keyword">property</span>-&gt;value());</div><div class="line">  }</div><div class="line">}</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>This is a specialized reflection solution intended to support dynamic UIs and serializing configuration values. Since every instance of PropertySet-derived structures builds its own internal reflection metadata it may not be appropriate for use cases where there are lots of instances of the reflected structures, or when the object creation performance is critical.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classcore_1_1_property.html" title="Reflection interface to a property in a PropertySet. ">Property</a></dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a7efad703bb60c3e420b6a1925b38377c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7efad703bb60c3e420b6a1925b38377c">&#9670;&nbsp;</a></span>fromJson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void core::PropertySet::fromJson </td>
          <td>(</td>
          <td class="paramtype">const json &amp;&#160;</td>
          <td class="paramname"><em>json_obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deserialize a set of properties from a json object. </p>
<p>The deserialization is not strict:</p><ul>
<li>Extra json properties are ignored</li>
<li>Missing properties will be set to the default values </li>
</ul>

</div>
</div>
<a id="a2d2cc202504c7ec8f7e48255eb2dd349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d2cc202504c7ec8f7e48255eb2dd349">&#9670;&nbsp;</a></span>toJson()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">json core::PropertySet::toJson </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serialize all the properties to a json object. </p>
<dl class="section note"><dt>Note</dt><dd>We use the string representation of values, even when there's a native json representation, for example integers. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/lemo/work/darwin/core/<a class="el" href="properties_8h_source.html">properties.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
